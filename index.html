<script>
const waNumber="6282199327646";
const diskonDeadline=new Date("2026-01-28T22:00:00+07:00");
let diskonAktif=false,totalHarga=0,extraKostum=0;

const hargaUmum={
1:100000,2:200000,3:300000,4:335000,5:370000,
6:400000,7:420000,8:450000,9:475000,10:500000,
11:525000,12:550000,13:575000,14:600000,15:625000,
16:560000
};

const photos={
umum:["images/IMG_3405.jpg","images/IMG_5997.jpg"],
wisuda:["images/IMG_0170.jpg","images/IMG_9977.jpg"],
prewedding:["images/IMG_1487.jpg","images/IMG_1470.jpg"],
pasfoto:["images/IMG_3298.jpg","images/anisa.jpg"]
};

function tampil(){
  total.innerText = totalHarga
  ? `Total: Rp ${totalHarga.toLocaleString("id-ID")}`
  : "Total: -";
}

/* ================= FOTO UMUM ================= */
function hitungUmum(){
  let o=+orangUmum.value||0,h=0;

  if(o<=16) h=hargaUmum[o]||0;
  else if(o<=25) h=o*30000;
  else if(o<=30) h=o*25000;

  if(diskonAktif) h*=0.9;
  totalHarga = h + extraKostum*50000;
  tampil();
}

/* ================= WISUDA ================= */
function hitungWisuda(){
  let paket=+paketWisuda.value||0;
  let o=+orangWisuda.value||0;
  let max=12;
  let extra=o>max?(o-max)*25000:0;
  totalHarga=(paket*1000)+extra;
  tampil();
}

/* ================= PREWEDDING ================= */
function hitungPrewedding(){
  totalHarga=(+paketPrewedding.value||0)*1000;
  tampil();
}

/* ================= PAS FOTO ================= */
function hitungPasfoto(){
  let h=jenisPasfoto.value==="sendiri"?40000:50000;
  if(gantiWarna.checked) h+=20000;
  if(bersihkanWajah.checked) h+=10000;
  if(editDasi.checked) h+=20000;
  h+=(+jumlahCetak.value||0)*3000;
  totalHarga=h;
  tampil();
}

/* ================= DISKON ================= */
function toggleDiskon(){
  if(new Date()>diskonDeadline) return;
  diskonAktif=!diskonAktif;
  tambahKostumBtn.disabled=!diskonAktif;
  if(layanan.value==="umum") hitungUmum();
}

/* ================= UI ================= */
function tambahKostum(){extraKostum++;hitungUmum()}

function updateGallery(){
  gallery.innerHTML="";
  (photos[layanan.value]||[]).forEach(s=>{
    let i=document.createElement("img");
    i.src=s;
    gallery.appendChild(i);
  });
}

function updateForm(){
  formUmum.style.display=layanan.value==="umum"?"block":"none";
  formWisuda.style.display=layanan.value==="wisuda"?"block":"none";
  formPrewedding.style.display=layanan.value==="prewedding"?"block":"none";
  formPasfoto.style.display=layanan.value==="pasfoto"?"block":"none";

  totalHarga=0;extraKostum=0;tampil();updateGallery();

  if(layanan.value==="wisuda") hitungWisuda();
  if(layanan.value==="prewedding") hitungPrewedding();
  if(layanan.value==="pasfoto") hitungPasfoto();
}

function kirimWA(){
  if(!nama.value||!hp.value||!tanggalBooking.value||!jamBooking.value)
    return alert("Lengkapi data");

  let msg=`Halo Logaloga Studio
Nama: ${nama.value}
WA: ${hp.value}
Tanggal: ${tanggalBooking.value}
Jam: ${jamBooking.value}
Total: Rp ${totalHarga.toLocaleString("id-ID")}`;

  window.open("https://wa.me/"+waNumber+"?text="+encodeURIComponent(msg));
}

function countdown(){
  let d=diskonDeadline-new Date();
  if(d<0) return countdown.innerText="Diskon berakhir";
  countdown.innerText=`Diskon berakhir ${Math.floor(d/86400000)} hari lagi`;
}

setInterval(countdown,1000);

layanan.onchange=updateForm;
orangUmum.oninput=hitungUmum;
orangWisuda.oninput=hitungWisuda;
paketWisuda.onchange=hitungWisuda;
paketPrewedding.onchange=hitungPrewedding;
jenisPasfoto.onchange=hitungPasfoto;
gantiWarna.onchange=hitungPasfoto;
bersihkanWajah.onchange=hitungPasfoto;
editDasi.onchange=hitungPasfoto;
jumlahCetak.oninput=hitungPasfoto;

updateForm();
</script>
